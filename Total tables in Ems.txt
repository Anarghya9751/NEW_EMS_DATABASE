create database EmployeeManagement;

use EmployeeManagement;

CREATE TABLE `organization` (
  `organizationId` int NOT NULL,
  `name` varchar(250) NOT NULL,
  PRIMARY KEY (`organizationId`)
);


CREATE TABLE `branch` (
  `branchId` int NOT NULL,
  `name` varchar(250) NOT NULL,
  `organizationId` int NOT NULL,
  PRIMARY KEY (`branchId`),
  KEY `organizationId` (`organizationId`),
  CONSTRAINT `branch_ibfk_1` FOREIGN KEY (`organizationId`) REFERENCES `organization` (`organizationId`)
);

CREATE TABLE `department` (
  `departmentId` int NOT NULL,
  `name` varchar(250) NOT NULL,
  `branchId` int NOT NULL,
  `organizationId` int NOT NULL,
  PRIMARY KEY (`departmentId`),
  KEY `branchId` (`branchId`),
  KEY `organizationId` (`organizationId`),
  CONSTRAINT `department_ibfk_1` FOREIGN KEY (`branchId`) REFERENCES `branch` (`branchId`),
  CONSTRAINT `department_ibfk_2` FOREIGN KEY (`organizationId`) REFERENCES `organization` (`organizationId`)
);

CREATE TABLE `designation` (
  `designationId` int NOT NULL,
  `name` varchar(250) NOT NULL,
  `departmentId` int NOT NULL,
  `branchId` int NOT NULL,
  `organizationId` int NOT NULL,
  PRIMARY KEY (`designationId`),
  KEY `departmentId` (`departmentId`),
  KEY `branchId` (`branchId`),
  KEY `organizationId` (`organizationId`),
  CONSTRAINT `designation_ibfk_1` FOREIGN KEY (`departmentId`) REFERENCES `department` (`departmentId`),
  CONSTRAINT `designation_ibfk_2` FOREIGN KEY (`branchId`) REFERENCES `branch` (`branchId`),
  CONSTRAINT `designation_ibfk_3` FOREIGN KEY (`organizationId`) REFERENCES `organization` (`organizationId`)
);

CREATE TABLE `employee` (
  `employeeId` int NOT NULL,
  `name` varchar(250) NOT NULL,
  `designationId` int NOT NULL,
  `departmentId` int NOT NULL,
  `branchId` int NOT NULL,
  `organizationId` int NOT NULL,
  PRIMARY KEY (`employeeId`),
  KEY `designationId` (`designationId`),
  KEY `departmentId` (`departmentId`),
  KEY `branchId` (`branchId`),
  KEY `organizationId` (`organizationId`),
  CONSTRAINT `employee_ibfk_1` FOREIGN KEY (`designationId`) REFERENCES `designation` (`designationId`),
  CONSTRAINT `employee_ibfk_2` FOREIGN KEY (`departmentId`) REFERENCES `department` (`departmentId`),
  CONSTRAINT `employee_ibfk_3` FOREIGN KEY (`branchId`) REFERENCES `branch` (`branchId`),
  CONSTRAINT `employee_ibfk_4` FOREIGN KEY (`organizationId`) REFERENCES `organization` (`organizationId`)
);

CREATE TABLE `role` (
  `role` varchar(250) NOT NULL,
  `departmentId` int NOT NULL,
  `branchId` int NOT NULL,
  `organizationId` int NOT NULL,
  PRIMARY KEY (`role`),
  KEY `departmentId` (`departmentId`),
  KEY `branchId` (`branchId`),
  KEY `organizationId` (`organizationId`),
  CONSTRAINT `role_ibfk_3` FOREIGN KEY (`departmentId`) REFERENCES `department` (`departmentId`),
  CONSTRAINT `role_ibfk_4` FOREIGN KEY (`branchId`) REFERENCES `branch` (`branchId`),
  CONSTRAINT `role_ibfk_5` FOREIGN KEY (`organizationId`) REFERENCES `organization` (`organizationId`)
);

CREATE TABLE `user` (
  `userId` int NOT NULL,
  `First_Name` varchar(250) NOT NULL,
  `Last_Name` varchar(250) NOT NULL,
  `Email` varchar(250) NOT NULL,
  `Phonenumber` int NOT NULL,
  `Password` varchar(250) NOT NULL,
  `isActive` tinyint(1) NOT NULL,
  `isDeleted` tinyint(1) NOT NULL,
  `isStatus` tinyint(1) NOT NULL,
  `image` varchar(250) NOT NULL,
  `role` varchar(250) NOT NULL,
  `employeeId` int NOT NULL,
  `designationId` int NOT NULL,
  `departmentId` int NOT NULL,
  `branchId` int NOT NULL,
  `organizationId` int NOT NULL,
  PRIMARY KEY (`userId`),
  KEY `role` (`role`),
  KEY `employeeId` (`employeeId`),
  KEY `designationId` (`designationId`),
  KEY `departmentId` (`departmentId`),
  KEY `branchId` (`branchId`),
  KEY `organizationId` (`organizationId`),
  CONSTRAINT `user_ibfk_1` FOREIGN KEY (`role`) REFERENCES `role` (`role`),
  CONSTRAINT `user_ibfk_2` FOREIGN KEY (`employeeId`) REFERENCES `employee` (`employeeId`),
  CONSTRAINT `user_ibfk_3` FOREIGN KEY (`designationId`) REFERENCES `designation` (`designationId`),
  CONSTRAINT `user_ibfk_4` FOREIGN KEY (`departmentId`) REFERENCES `department` (`departmentId`),
  CONSTRAINT `user_ibfk_5` FOREIGN KEY (`branchId`) REFERENCES `branch` (`branchId`),
  CONSTRAINT `user_ibfk_6` FOREIGN KEY (`organizationId`) REFERENCES `organization` (`organizationId`)
);

CREATE TABLE `client` (
  `clientId` int NOT NULL,
  `clientname` varchar(250) NOT NULL,
  `clientLocation` varchar(250) NOT NULL,
  `countryState` varchar(250) NOT NULL,
  `departmentId` int NOT NULL,
  `reporting` varchar(250) NOT NULL,
  `Status` tinyint(1) NOT NULL,
  `Actions` varchar(250) NOT NULL,
  PRIMARY KEY (`clientId`),
  KEY `departmentId` (`departmentId`),
  CONSTRAINT `client_ibfk_1` FOREIGN KEY (`departmentId`) REFERENCES `department` (`departmentId`)
);

CREATE TABLE `projects` (
  `ProjectCode` varchar(250) NOT NULL,
  `ProjectName` varchar(250) NOT NULL,
  `departmentId` int NOT NULL,
  `ProjectStartDate` varchar(250) NOT NULL,
  `ProjectDeadlineDate` varchar(250) NOT NULL,
  `clientId` int NOT NULL,
  `Team` varchar(250) NOT NULL,
  `Status` tinyint(1) NOT NULL,
  `Actions` tinyint(1) NOT NULL,
  PRIMARY KEY (`ProjectName`),
  KEY `departmentId` (`departmentId`),
  KEY `clientId` (`clientId`),
  CONSTRAINT `projects_ibfk_1` FOREIGN KEY (`departmentId`) REFERENCES `department` (`departmentId`),
  CONSTRAINT `projects_ibfk_2` FOREIGN KEY (`clientId`) REFERENCES `client` (`clientId`)
) ;

CREATE TABLE `task` (
  `TaskCode` varchar(250) NOT NULL,
  `ProjectName` varchar(250) NOT NULL,
  `status` tinyint(1) NOT NULL,
  `sprint` varchar(250) NOT NULL,
  `milestone` varchar(250) NOT NULL,
  `startDate` int NOT NULL,
  `Description` varchar(2000) NOT NULL,
  PRIMARY KEY (`TaskCode`),
  KEY `ProjectName` (`ProjectName`),
  CONSTRAINT `task_ibfk_1` FOREIGN KEY (`ProjectName`) REFERENCES `projects` (`ProjectName`)
);